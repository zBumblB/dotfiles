#!/bin/sh
xconf="${XDG_CONFIG_HOME:-$HOME/.config}/x11"
[ -d "$xconf" ] || exit

newcolorscheme=$(exa -1 $xconf/xres/colorscheme | dmenu)
[ -f "$xconf/xres/colorscheme/$newcolorscheme" ] || exit

[ "$1" = "-p" ] && persistent="-i"

# i'm proud of myself for this one-liner
sed $persistent "s/\"colorscheme\/.*\"/\"colorscheme\/$newcolorscheme\"/" $xconf/xresources | xrdb -merge "-I$xconf/xres" ${persistent:+"$xconf/xresources"}

# update zathura colors
. ${XDG_CONFIG_HOME:-$HOME/.config}/zathura/gencolors


notify-send -i "$newcolorscheme" "Changed colorscheme to $newcolorscheme"
